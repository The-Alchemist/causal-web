<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>CCD: Basic Setup</title>
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="../../../static/vendors/bootstrap/css/bootstrap.min.css" th:href="@{/vendors/bootstrap/css/bootstrap.min.css}" />
        <link rel="stylesheet" href="../../../static/vendors/bootstrap/css/bootstrap-theme.min.css" th:href="@{/vendors/bootstrap/css/bootstrap-theme.min.css}" />
        <link rel="stylesheet" href="../../../static/css/styles.css" th:href="@{/css/styles.css}" />
        <link rel="stylesheet" href="../../../static/css/setup.css" th:href="@{/css/setup.css}" />
        <style>
            iframe {
                width: 100%;
                height: 400px;
                border: 1px solid #DEDEDE;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <h3 th:text="${@environment.getProperty('ccd.title')}">Center for Casual Discovery</h3>
                    <div class="panel panel-pitt">
                        <div class="panel-heading">
                            <h3 class="panel-title">User Profile Setup</h3>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="center-block">
                                    <img class="profile-img" src="../../../static/img/ccd_logo.png" th:src="@{/img/ccd_logo.png}" alt="profile picture" />
                                </div>
                            </div>
                            <div th:if="${errorMsg}">
                                <div class="row">
                                    <div class="alert alert-danger text-center" role="alert" th:text="${errorMsg}">error message</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <form id="userSetup" method="POST" action="setup" role="form">
                                        <div class="form-group">
                                            <label for="firstName">First Name:</label>
                                            <input id="firstName" name="firstName" class="form-control" type="text" value="" th:value="${person.firstName}" required="required" autofocus="autofocus" />
                                        </div>
                                        <div class="form-group">
                                            <label for="lastName">Last Name:</label>
                                            <input id="lastName" name="lastName" class="form-control" type="text" value="" th:value="${person.lastName}" required="required" />
                                        </div>
                                        <div class="form-group">
                                            <label for="email">Email:</label>
                                            <input id="email" name="email" class="form-control" type="email" value="" th:value="${person.email}" required="required" />
                                        </div>
                                        <div class="form-group">
                                            <label for="workspace">Workspace Directory:</label>
                                            <div class="input-group">
                                                <input id="workspace" name="workspace" class="form-control" type="text" value="" th:value="${person.workspace}" required="required" />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" data-toggle="modal" data-target="#browseModal">Browse...</button>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <input type="submit" class="btn btn-lg btn-block btn-pitt" value="Submit" />
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer th:replace="fragments/footer_center :: footer">
                <div class="row">
                    <div class="text-center">
                        <p class="text-muted">Copyright &copy; 1900 University of Pittsburgh Department of Biomedical Informatics</p>
                    </div>
                </div>
            </footer>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="browseModal" tabindex="-1" role="dialog" aria-labelledby="browseModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="newFolderModalLabel">Browse Workspace Directory</h4>
                    </div>
                    <div class="modal-body">
                        <div th:if="${person.workspace}">
                            <iframe id="frmBrowse" src="#" th:src="@{/fs/dirBrowser(dir=${person.workspace})}" marginwidth="0" marginheight="0" scrolling="yes"></iframe>
                        </div>
                        <div th:if="${person.workspace} == null">
                            <iframe id="frmBrowse" src="#" th:src="@{/fs/dirBrowser}" marginwidth="0" marginheight="0" scrolling="yes"></iframe>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" data-dismiss="modal" onclick="$('#workspace').val($('#frmBrowse').contents().find('#selectedDir').val());">Select</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="../../../static/vendors/jquery/jquery.min.js" th:src="@{/vendors/jquery/jquery.min.js}"></script>
        <script src="../../../static/vendors/bootstrap/js/bootstrap.min.js" th:src="@{/vendors/bootstrap/js/bootstrap.min.js}"></script>
        <script src="../../../static/vendors/jquery-validation/jquery.validate.min.js" th:src="@{/vendors/jquery-validation/jquery.validate.min.js}"></script>
        <script src="../../../static/js/setup.js" th:src="@{/js/setup.js}"></script>
    </body>
</html>
